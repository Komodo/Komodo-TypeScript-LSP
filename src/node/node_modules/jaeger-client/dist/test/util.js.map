{"version":3,"sources":["../../test/util.js"],"names":["describe","it","isNotOk","ipToInt","equal","removeLeadingZeros","results","encoding","mode","expectedTags","description","deepEqual"],"mappings":";;AAaA;;AACA;;;;AACA;;;;;;AAEAA,SAAS,OAAT,EAAkB,YAAM;AACpBA,aAAS,SAAT,EAAoB,YAAM;AACtBC,WAAG,qCAAH,EAA0C,YAAM;AAC5C,yBAAOC,OAAP,CAAe,eAAMC,OAAN,CAAc,OAAd,CAAf;AACH,SAFD;;AAIAF,WAAG,2DAAH,EAAgE,YAAM;AAClE,yBAAOG,KAAP,CAAc,OAAO,EAAR,GAAc,CAA3B,EAA8B,eAAMD,OAAN,CAAc,WAAd,CAA9B;AACH,SAFD;;AAIAF,WAAG,6DAAH,EAAkE,YAAM;AACpE,yBAAOG,KAAP,CAAa,CAAC,CAAd,EAAiB,eAAMD,OAAN,CAAc,iBAAd,CAAjB;AACH,SAFD;AAGH,KAZD;;AAcAH,aAAS,oBAAT,EAA+B,YAAM;AACjCC,WAAG,oCAAH,EAAyC,YAAM;AAC3C,yBAAOG,KAAP,CAAa,GAAb,EAAkB,eAAMC,kBAAN,CAAyB,GAAzB,CAAlB;AACH,SAFD;;AAIAJ,WAAG,wCAAH,EAA6C,YAAM;AAC/C,yBAAOG,KAAP,CAAa,GAAb,EAAkB,eAAMC,kBAAN,CAAyB,GAAzB,CAAlB;AACH,SAFD;;AAIAJ,WAAG,4BAAH,EAAiC,YAAM;AACnC,yBAAOG,KAAP,CAAa,GAAb,EAAkB,eAAMC,kBAAN,CAAyB,MAAzB,CAAlB;AACH,SAFD;;AAIAJ,WAAG,wCAAH,EAA6C,YAAM;AAC/C,yBAAOG,KAAP,CAAa,GAAb,EAAkB,eAAMC,kBAAN,CAAyB,MAAzB,CAAlB;AACH,SAFD;AAGH,KAhBD;;AAkBAJ,OAAI,sEAAJ,EAA4E,YAAM;AAC9E,YAAIK,UAAU,4BAAa,EAAEC,UAAU,CAAC,MAAD,EAAS,QAAT,CAAZ,EAAgCC,MAAM,CAAC,SAAD,EAAY,SAAZ,CAAtC,EAAb,CAAd;AACA,YAAIC,eAAe,CACf,EAAEF,UAAU,MAAZ,EAAoBC,MAAM,SAA1B,EAAqCE,aAAa,4BAAlD,EADe,EAEf,EAAEH,UAAU,MAAZ,EAAoBC,MAAM,SAA1B,EAAqCE,aAAa,4BAAlD,EAFe,EAGf,EAAEH,UAAU,QAAZ,EAAsBC,MAAM,SAA5B,EAAuCE,aAAa,8BAApD,EAHe,EAIf,EAAEH,UAAU,QAAZ,EAAsBC,MAAM,SAA5B,EAAuCE,aAAa,8BAApD,EAJe,CAAnB;AAMA,qBAAOC,SAAP,CAAiBF,YAAjB,EAA+BH,OAA/B;AACH,KATD;AAUH,CA3CD;AAhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"util.js","sourcesContent":["// @flow\n// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\n// in compliance with the License. You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software distributed under the License\n// is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n// or implied. See the License for the specific language governing permissions and limitations under\n// the License.\n\nimport {assert} from 'chai';\nimport Utils from '../src/util.js';\nimport combinations from './lib/combinations.js'\n\ndescribe('utils', () => {\n    describe('ipToInt', () => {\n        it('should convert malformed IP to null', () => {\n            assert.isNotOk(Utils.ipToInt('127.0'));\n        });\n\n        it('should convert an ip less than 2^32 to an unsigned number', () => {\n            assert.equal((127 << 24) | 1, Utils.ipToInt('127.0.0.1'));\n        });\n\n        it('should convert an ip greater than 2^32 to a negative number', () => {\n            assert.equal(-1, Utils.ipToInt('255.255.255.255'));\n        });\n    });\n\n    describe('removeLeadingZeros', () => {\n        it('should leave single 0 digit intact', () => {\n            assert.equal('0', Utils.removeLeadingZeros('0'));\n        });\n\n        it('should leave single non-0 digit intact', () => {\n            assert.equal('1', Utils.removeLeadingZeros('1'));\n        });\n\n        it('should strip leading zeros', () => {\n            assert.equal('1', Utils.removeLeadingZeros('0001'));\n        });\n\n        it('should convert all zeros to a single 0', () => {\n            assert.equal('0', Utils.removeLeadingZeros('0000'));\n        });\n    });\n\n    it ('combinations should generate all combinations given valid parameters', () => {\n        let results = combinations({ encoding: ['json', 'thrift'], mode: ['channel', 'request']});\n        let expectedTags = [\n            { encoding: 'json', mode: 'channel', description: 'encoding=json,mode=channel' },\n            { encoding: 'json', mode: 'request', description: 'encoding=json,mode=request' },\n            { encoding: 'thrift', mode: 'channel', description: 'encoding=thrift,mode=channel' },\n            { encoding: 'thrift', mode: 'request', description: 'encoding=thrift,mode=request' }\n        ];\n        assert.deepEqual(expectedTags, results);\n    });\n});\n"]}